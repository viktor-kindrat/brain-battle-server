<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test document</title>
</head>

<body>
    <h1>Hello world</h1>
    <a id="signin" href="http://localhost:5555/auth/google">Continue with Google</a>
    <script>
        window.addEventListener("load", ()=>{
            let id = localStorage.getItem("id") || null;
            if (id === null) {
                localStorage.setItem("id", window.location.hash.substring(1))
                window.location.replace(window.location.href.slice(0, window.location.href.indexOf("#")))
            } else {
                fetch("http://localhost:5555/db/getUserInfo", {
                    method: "POST",
                    headers: {
                        "Content-type": "application/json"
                    },
                    body: JSON.stringify({
                        id: id
                    })
                }).then(res=>res.json())
                .then(data=>{
                    console.log(data)
                })
                .catch(e=>console.log(e))
            }
        })
    </script>
</body>

</html>